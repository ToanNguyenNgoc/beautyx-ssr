{"version":3,"file":"static/js/660.ffe0f472.chunk.js","mappings":"sLACA,EAAuB,0BAAvB,EAA6D,+BAA7D,EAAwG,+BAAxG,EAAwJ,oCAAxJ,EAA8M,qCAA9M,EAAiQ,iC,oIC8GjQ,MAzFA,WAAuB,IAADA,EAAAC,EAAAC,EAClB,MAAM,IAAEC,IAAQC,EAAAA,EAAAA,MACVC,GAAUC,EAAAA,EAAAA,MACVC,GAAQC,EAAAA,EAAAA,MACRC,GAAWC,EAAAA,EAAAA,KACXC,EAAOC,EAAAA,GAAAA,MAAYC,GAAMV,KAAQW,EAAAA,EAAAA,IAAQD,EAAEE,UACjDC,EAAAA,EAAAA,YAAU,KACDL,GAAMN,EAAQY,QAAQ,SAAS,GACrC,IACH,MAAMC,EAA2B,IAC1BC,EAAAA,GACHC,KAAM,IACNC,MAAO,GACPC,QAAsB,QAAftB,EAAM,OAAJW,QAAI,IAAJA,OAAI,EAAJA,EAAMW,eAAO,IAAAtB,EAAAA,EAAI,GAC1BuB,6BAA6C,QAAjBtB,EAAM,OAAJU,QAAI,IAAJA,OAAI,EAAJA,EAAMa,iBAAS,IAAAvB,EAAAA,EAAI,GACjDwB,6BAA6C,QAAjBvB,EAAM,OAAJS,QAAI,IAAJA,OAAI,EAAJA,EAAMe,iBAAS,IAAAxB,EAAAA,EAAI,GACjDyB,cAAc,EACdC,SAAUnB,EACVoB,KAAM,aAEJ,UAAEC,EAAS,YAAEC,EAAW,WAAEC,IAAeC,EAAAA,EAAAA,IAC3CtB,EACAuB,EAAAA,EAAAA,YAAwB,MACxBhB,GAKEiB,GAAUC,EAAAA,EAAAA,QAAuB,MACjCC,GAAYD,EAAAA,EAAAA,QAAuB,MAMnCE,GAAYC,EAAAA,EAAAA,IALF,CACZC,KAAM,KACNC,WAAY,MACZC,UAAW,IAE+BL,GAQ9C,OAPAM,OAAOC,iBAAiB,UAAU,KACd,IAADC,EAERC,EAFHR,EACe,QAAfO,EAAAV,EAAQY,eAAO,IAAAF,GAAfA,EAAiBG,UAAUC,OAAOC,GAEnB,QAAfJ,EAAAX,EAAQY,eAAO,IAAAD,GAAfA,EAAiBE,UAAUG,IAAID,EACnC,KAGAE,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,CACK/C,IACGgD,EAAAA,EAAAA,KAAA,OAAKC,IAAKrB,EAASsB,UAAWP,EAAWI,UACrCC,EAAAA,EAAAA,KAACG,EAAAA,GAAO,CACJC,QAASA,IAAMtD,EAAQuD,SACvBC,KAAMA,EAAAA,EAAAA,iBACNC,SAAU,QAItBP,EAAAA,EAAAA,KAACQ,EAAAA,EAAS,CAAAT,UACNF,EAAAA,EAAAA,MAAA,OAAKK,UAAWP,EAAgBI,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,OAAKC,IAAKnB,EAAWoB,UAAWP,EAAsBI,UAClDC,EAAAA,EAAAA,KAAA,OACIS,IAAS,OAAJrD,QAAI,IAAJA,OAAI,EAAJA,EAAMsD,OACXR,UAAWP,EACXgB,IAAI,QAGZd,EAAAA,EAAAA,MAACe,EAAAA,EAAc,CACXC,WAAYtC,EAAUuC,OACtBC,SAAS,EACTC,QAAQhB,EAAAA,EAAAA,KAAAF,EAAAA,SAAA,IACRmB,KA1CLC,KACP3C,EAAUuC,OAAStC,GAAaC,GAAY,EAyCnBsB,SAAA,EAEbC,EAAAA,EAAAA,KAAA,MAAIE,UAAWP,EAAqBI,SACtB,OAATxB,QAAS,IAATA,OAAS,EAATA,EAAW4C,KACR,CAACC,EAAmBC,KAChBrB,EAAAA,EAAAA,KAACsB,EAAAA,GAAe,CAEZC,YAAaH,GADRC,OAMpB9C,EAAUuC,OAAStC,IAChBwB,EAAAA,EAAAA,KAACwB,EAAAA,GAAQ,CAACC,WAAY,GAAIC,KAAM1E,EAAQ,EAAI,cAOxE,C","sources":["webpack://web-booking/./src/pages/DealBanner/deal-banner.module.css?425b","pages/DealBanner/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"head\":\"deal-banner_head__jD7IE\",\"head_show\":\"deal-banner_head_show__GpOAR\",\"container\":\"deal-banner_container__cEaeH\",\"list_container\":\"deal-banner_list_container__v5Cgz\",\"deal_banner_cnt\":\"deal-banner_deal_banner_cnt__itJWn\",\"deal_banner\":\"deal-banner_deal_banner__xAqw9\"};","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useRef } from \"react\";\nimport { deals } from \"pages/HomePage/data\";\nimport style from \"./deal-banner.module.css\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport {\n    useDeviceMobile,\n    useElementOnScreen,\n    useFetchInfinite,\n} from \"hooks\";\nimport { slugify } from \"utils\";\nimport { Container } from \"@mui/system\";\nimport { paramsProductable } from \"params-query\";\nimport { ParamsProductable } from \"params-query/param.interface\";\nimport { API_ROUTE_V } from \"api/_api\";\nimport { Productable } from \"interface\";\nimport { ProductableItem, XButton } from \"components/Layout\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { LoadGrid } from \"components/LoadingSketion\";\nimport icon from \"constants/icon\";\nimport { AUTH_LOCATION } from \"api/authLocation\";\n\nfunction DealBanner() {\n    const { _id } = useParams();\n    const history = useHistory();\n    const IS_MB = useDeviceMobile();\n    const LOCATION = AUTH_LOCATION();\n    const deal = deals.find((i) => _id === slugify(i.title));\n    useEffect(() => {\n        if (!deal) history.replace(\"/error\");\n    }, []);\n    const param: ParamsProductable = {\n        ...paramsProductable,\n        type: \"1\",\n        limit: 18,\n        keyword: deal?.keyword ?? \"\",\n        discount_max_price_ecommerce: deal?.max_price ?? \"\",\n        discount_min_price_ecommerce: deal?.min_price ?? \"\",\n        on_ecommerce: true,\n        location: LOCATION,\n        sort: \"distance\",\n    };\n    const { resDataV2, totalItemV2, onLoadMore } = useFetchInfinite(\n        deal,\n        API_ROUTE_V.PRODUCTABLE(\"v3\"),\n        param\n    );\n    const onMore = () => {\n        if (resDataV2.length < totalItemV2) onLoadMore();\n    };\n    const refHead = useRef<HTMLDivElement>(null);\n    const bannerRef = useRef<HTMLDivElement>(null);\n    const options = {\n        root: null,\n        rootMargin: \"0px\",\n        threshold: 0.3,\n    };\n    const isVisible = useElementOnScreen(options, bannerRef);\n    window.addEventListener(\"scroll\", () => {\n        if (isVisible) {\n            refHead.current?.classList.remove(style.head_show);\n        } else {\n            refHead.current?.classList.add(style.head_show);\n        }\n    });\n    return (\n        <>\n            {IS_MB && (\n                <div ref={refHead} className={style.head}>\n                    <XButton\n                        onClick={() => history.goBack()}\n                        icon={icon.chevronLeftWhite}\n                        iconSize={28}\n                    />\n                </div>\n            )}\n            <Container>\n                <div className={style.container}>\n                    <div ref={bannerRef} className={style.deal_banner_cnt}>\n                        <img\n                            src={deal?.banner}\n                            className={style.deal_banner}\n                            alt=\"\"\n                        />\n                    </div>\n                    <InfiniteScroll\n                        dataLength={resDataV2.length}\n                        hasMore={true}\n                        loader={<></>}\n                        next={onMore}\n                    >\n                        <ul className={style.list_container}>\n                            {resDataV2?.map(\n                                (item: Productable, index: number) => (\n                                    <ProductableItem\n                                        key={index}\n                                        productable={item}\n                                    />\n                                )\n                            )}\n                        </ul>\n                        {resDataV2.length < totalItemV2 && (\n                            <LoadGrid item_count={12} grid={IS_MB ? 2 : 6} />\n                        )}\n                    </InfiniteScroll>\n                </div>\n            </Container>\n        </>\n    );\n}\n\nexport default DealBanner;\n"],"names":["_deal$keyword","_deal$max_price","_deal$min_price","_id","useParams","history","useHistory","IS_MB","useDeviceMobile","LOCATION","AUTH_LOCATION","deal","deals","i","slugify","title","useEffect","replace","param","paramsProductable","type","limit","keyword","discount_max_price_ecommerce","max_price","discount_min_price_ecommerce","min_price","on_ecommerce","location","sort","resDataV2","totalItemV2","onLoadMore","useFetchInfinite","API_ROUTE_V","refHead","useRef","bannerRef","isVisible","useElementOnScreen","root","rootMargin","threshold","window","addEventListener","_refHead$current","_refHead$current2","current","classList","remove","style","add","_jsxs","_Fragment","children","_jsx","ref","className","XButton","onClick","goBack","icon","iconSize","Container","src","banner","alt","InfiniteScroll","dataLength","length","hasMore","loader","next","onMore","map","item","index","ProductableItem","productable","LoadGrid","item_count","grid"],"sourceRoot":""}